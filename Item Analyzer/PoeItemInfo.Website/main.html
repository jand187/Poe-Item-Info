<!DOCTYPE html>
<html lang="en" ng-app="itemAnalyzer">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Items - My ASP.NET Application</title>
		
		<link href="Content/bootstrap.css" rel="stylesheet" />
		<link href="Content/site.css" rel="stylesheet" />
		<script src="Scripts/angular.js"></script>
		<script src="Scripts/angular-route.js"></script>
		<script src="Scripts/angular-resource.js"></script>
	</head>
	<body>
		<div class="navbar navbar-inverse navbar-fixed-top">
			<div class="container">
				<ul class="nav navbar-nav">
					<li><a ng-href="#/items/list">Items</a></li>
					<li><a ng-href="#/stash/list">Stash</a></li>
					<li><a ng-href="#/categories">Categories</a></li>
				</ul>
			</div>
		</div>
		<div class="container body-content">
			<div ng-view=""></div>
			
			<div>
				<hr />
				<footer>
					<p>&copy; Jan Daniel Andersen </p>
				</footer>
			</div>
		</div>

	</body>


	<script>
		var itemAnalyzer = angular.module("itemAnalyzer", ["ngRoute"])
			.config(function($routeProvider) {
				$routeProvider
					.when("/items/list",
					{
						controller: "itemsController",
						templateUrl: "Spa/partials/itemsList.html"
					})
					.when("/stash/list",
					{
						controller: "stashController",
						templateUrl: "Spa/partials/stashList.html"
					})
					.when("/categories",
					{
						controller: "editCategoriesController",
						templateUrl: "Spa/partials/editCategories.html"
					})
					.otherwise({
						redirectTo: "/items/list"
					});
			})
			.controller("itemsController", function($scope, $http) {
				$scope.GetItems = function() {
					$http.get("api/items/GetItems")
						.success(function(data, status, headers, config) {
							$scope.items = data;
							console.log(data);
						})
						.error(function(data, status, headers, config) {
							console.log("failed \r\n" + $scope.invoice);
						});
				};
				$scope.GetItems();
			})
			.controller("stashController", function($scope, $http) {
				$scope.GetTabs = function (index) {
					$http.get("api/stash/GetTab/" + index)
						.success(function (data, status, headers, config) {
							$scope.items = data;
							console.log(data);
						})
						.error(function (data, status, headers, config) {
							console.log("failed \r\n" + $scope.invoice);
						});
				};
				$scope.tabs = $scope.GetItems();
			});

	</script>
</html>